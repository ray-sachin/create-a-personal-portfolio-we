<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Your Name – Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Personal portfolio website. Toggle Edit Mode to quickly replace placeholders, update links, images, and projects, then save to your browser." />
  <style>
    :root{
      --bg:#0f1221;
      --panel:#151936;
      --muted:#8a93b2;
      --text:#eef1ff;
      --accent:#6c8cff;
      --accent-2:#65e2c1;
      --danger:#ff6b6b;
      --ok:#2ecc71;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --radius: 14px;
      --radius-sm: 10px;
      --radius-xs: 8px;
      --container: 1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(180deg,#0f1221,#0b0e1a);color:var(--text);font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji"; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale}
    a{color:var(--accent);text-decoration:none}
    a:hover{opacity:.9;text-decoration:underline}
    img{max-width:100%;height:auto;display:block}
    header{
      position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(10px);
      background:linear-gradient(180deg,rgba(10,14,35,.8),rgba(10,14,35,.4));
      border-bottom:1px solid rgba(255,255,255,.06)
    }
    .wrap{max-width:var(--container);margin:0 auto;padding:0 20px}
    .nav{
      display:flex;align-items:center;justify-content:space-between;gap:16px;
      min-height:64px
    }
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.2px}
    .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent-2);display:inline-block;box-shadow:0 0 10px rgba(101,226,193,.7)}
    nav a{color:var(--text);opacity:.85;margin:0 10px}
    nav a.active{color:var(--accent)}
    .container{max-width:var(--container);margin:0 auto;padding:40px 20px}
    .grid-2{display:grid;grid-template-columns:1.2fr .8fr;gap:28px}
    @media (max-width:860px){.grid-2{grid-template-columns:1fr}}
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);border-radius:var(--radius)
    }
    .pad{padding:28px}
    h1,h2,h3{line-height:1.2;margin:0 0 12px}
    h1{font-size:clamp(28px,5vw,40px)}
    h2{font-size:clamp(22px,3vw,28px);opacity:.95}
    h3{font-size:clamp(18px,2.4vw,22px)}
    .muted{color:var(--muted)}
    .lead{font-size:1.05rem}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.1);
      color:#fff;background:linear-gradient(180deg,rgba(108,140,255,.25),rgba(108,140,255,.15));
      box-shadow:0 6px 18px rgba(108,140,255,.15);cursor:pointer
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.secondary{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03))}
    .btn.danger{background:linear-gradient(180deg,rgba(255,107,107,.3),rgba(255,107,107,.15));border-color:rgba(255,107,107,.4)}
    .btn.ok{background:linear-gradient(180deg,rgba(46,204,113,.3),rgba(46,204,113,.15));border-color:rgba(46,204,113,.45)}
    .sp-1{height:14px}
    .sp-2{height:22px}
    .sp-3{height:30px}
    .hero{
      display:flex;flex-direction:column;gap:18px
    }
    .tag{
      display:inline-flex;align-items:center;gap:8px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);
      color:#cfe3ff;padding:6px 10px;border-radius:999px;font-size:.9rem
    }
    .actions{display:flex;flex-wrap:wrap;gap:10px}
    .photo{
      width:200px;height:200px;border-radius:22px;overflow:hidden;border:1px solid rgba(255,255,255,.1);
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03))
    }
    .section{margin:34px 0}
    .skills{display:flex;flex-wrap:wrap;gap:10px}
    .skills li{list-style:none;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);padding:8px 12px;border-radius:999px}
    .projects{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    @media (max-width:980px){.projects{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.projects{grid-template-columns:1fr}}
    .project-card{display:flex;flex-direction:column;overflow:hidden;border-radius:var(--radius);background:linear-gradient(180deg,rgba(255,255,255,.07),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08)}
    .image-wrap{position:relative;aspect-ratio:16/9;background:rgba(0,0,0,.2);overflow:hidden}
    .image-wrap img{width:100%;height:100%;object-fit:cover}
    .project-content{padding:16px}
    .project-links{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
    .img-change{
      position:absolute;bottom:10px;right:10px;padding:6px 10px;border-radius:10px;border:1px dashed rgba(255,255,255,.35);
      color:#fff;background:rgba(0,0,0,.35);cursor:pointer;font-size:.9rem
    }
    .remove-project{
      margin-top:10px;background:transparent;color:#fff;border:1px solid rgba(255,255,255,.12);
      padding:8px 10px;border-radius:10px;cursor:pointer
    }
    .href-editor,.edit-link-btn{
      margin-left:6px;font-size:.85rem;border-radius:8px;border:1px dashed rgba(255,255,255,.35);
      background:rgba(0,0,0,.25);color:#fff;padding:4px 8px;cursor:pointer
    }
    footer{opacity:.7;border-top:1px solid rgba(255,255,255,.06);padding:24px 0;margin-top:24px}
    .floating-edit{
      position:fixed;z-index:60;right:18px;bottom:18px;display:flex;flex-direction:column;gap:10px
    }
    .floating-edit .row{display:flex;gap:10px;flex-wrap:wrap}
    .floating-edit .hint{font-size:.85rem;color:var(--muted);text-align:right}
    .edit-only{display:none}
    body.editing .edit-only{display:initial}
    body.editing [data-edit], body.editing [contenteditable="true"]{
      outline:2px dashed rgba(108,140,255,.55);outline-offset:2px;border-radius:6px
    }
    body.editing .image-wrap .img-change{display:inline-flex}
    .image-wrap .img-change{display:none}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <span id="brand-name" data-edit="brand-name">Your Name</span>
      </div>
      <nav aria-label="Primary">
        <a href="#about">About</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <section class="grid-2 section" id="hero">
      <div class="hero">
        <span class="tag">Available for work</span>
        <h1 id="name" data-edit="name">Hi, I’m <span style="color:var(--accent-2)">Your Name</span><br/>a Full‑Stack Developer</h1>
        <p class="lead muted" id="tagline" data-edit="tagline">I design and build web apps that are fast, accessible, and delightful to use.</p>
        <div class="actions">
          <a class="btn" id="cta-primary" data-edit="cta-text" data-edit-href="true" href="#">Download Resume</a>
          <a class="btn secondary" id="cta-secondary" data-edit="cta2-text" data-edit-href="true" href="#projects">View Projects</a>
        </div>
      </div>
      <div>
        <div class="photo image-wrap card">
          <img id="hero-photo" alt="Your profile photo" data-edit-img="hero-photo" src="" />
          <label class="img-change edit-only">Change Image
            <input type="file" accept="image/*" data-img-input="hero-photo" hidden />
          </label>
        </div>
      </div>
    </section>

    <section class="section card pad" id="about">
      <h2>About</h2>
      <p id="about-text" class="muted" data-edit="about-text">
        I’m a developer specializing in modern, responsive websites and full‑stack applications.
        I love working with JavaScript/TypeScript, React, and Node, and I care deeply about UX and performance.
      </p>
      <div class="sp-1"></div>
      <h3>Skills</h3>
      <ul id="skills-list" class="skills" data-edit="skills-list" aria-label="Skills list">
        <li>HTML</li>
        <li>CSS</li>
        <li>JavaScript / TypeScript</li>
        <li>React</li>
        <li>Node.js</li>
        <li>Express</li>
        <li>PostgreSQL</li>
        <li>REST / GraphQL</li>
      </ul>
    </section>

    <section class="section" id="projects">
      <div class="card pad" style="margin-bottom:16px">
        <h2>Projects</h2>
        <p class="muted">A few things I’ve worked on recently.</p>
      </div>
      <div id="projects-list" class="projects">
        <!-- Initial sample cards; fully editable in Edit Mode -->
        <article class="project-card" data-project-id="p1">
          <div class="image-wrap">
            <img alt="Project image" data-prop="image" data-edit-img="project-p1" src="" />
            <label class="img-change edit-only">Change Image
              <input type="file" accept="image/*" data-img-input="project-p1" hidden />
            </label>
          </div>
          <div class="project-content">
            <h3 data-prop="title" contenteditable="false">Project One</h3>
            <p class="muted" data-prop="desc" contenteditable="false">A short description of the project and what it does.</p>
            <p class="project-links">
              <a href="#" data-prop="link" data-edit-href="true">View Project</a>
              <button class="edit-link-btn edit-only" title="Edit project link URL">✏︎ link</button>
            </p>
            <button class="remove-project edit-only" title="Remove this project">Remove</button>
          </div>
        </article>

        <article class="project-card" data-project-id="p2">
          <div class="image-wrap">
            <img alt="Project image" data-prop="image" data-edit-img="project-p2" src="" />
            <label class="img-change edit-only">Change Image
              <input type="file" accept="image/*" data-img-input="project-p2" hidden />
            </label>
          </div>
          <div class="project-content">
            <h3 data-prop="title" contenteditable="false">Project Two</h3>
            <p class="muted" data-prop="desc" contenteditable="false">A short description of the project and what it does.</p>
            <p class="project-links">
              <a href="#" data-prop="link" data-edit-href="true">View Project</a>
              <button class="edit-link-btn edit-only" title="Edit project link URL">✏︎ link</button>
            </p>
            <button class="remove-project edit-only" title="Remove this project">Remove</button>
          </div>
        </article>

        <article class="project-card" data-project-id="p3">
          <div class="image-wrap">
            <img alt="Project image" data-prop="image" data-edit-img="project-p3" src="" />
            <label class="img-change edit-only">Change Image
              <input type="file" accept="image/*" data-img-input="project-p3" hidden />
            </label>
          </div>
          <div class="project-content">
            <h3 data-prop="title" contenteditable="false">Project Three</h3>
            <p class="muted" data-prop="desc" contenteditable="false">A short description of the project and what it does.</p>
            <p class="project-links">
              <a href="#" data-prop="link" data-edit-href="true">View Project</a>
              <button class="edit-link-btn edit-only" title="Edit project link URL">✏︎ link</button>
            </p>
            <button class="remove-project edit-only" title="Remove this project">Remove</button>
          </div>
        </article>
      </div>
    </section>

    <section class="section card pad" id="contact">
      <h2>Contact</h2>
      <p class="muted">Want to work together or just say hi?</p>
      <p>
        Email me:
        <a id="contact-email" href="mailto:you@example.com" data-edit="contact-email-text" data-edit-href="true">you@example.com</a>
        <button class="href-editor edit-only" data-href-edit-for="contact-email">✏︎ email link</button>
      </p>
      <p>
        Social:
        <a id="social-github" href="#" data-edit="github-text" data-edit-href="true">GitHub</a>
        <button class="href-editor edit-only" data-href-edit-for="social-github">✏︎</button>
        <span class="muted">·</span>
        <a id="social-linkedin" href="#" data-edit="linkedin-text" data-edit-href="true">LinkedIn</a>
        <button class="href-editor edit-only" data-href-edit-for="social-linkedin">✏︎</button>
      </p>
    </section>

    <footer class="wrap">
      <small>© <span id="year"></span> <span data-edit="footer-name">Your Name</span>. All rights reserved.</small>
    </footer>
  </div>

  <!-- Floating edit controls -->
  <div class="floating-edit">
    <div class="row">
      <button id="toggle-edit" class="btn" aria-pressed="false" title="Toggle Edit Mode">✏︎ Edit</button>
      <button id="save-btn" class="btn ok edit-only" title="Save changes">Save</button>
      <button id="reset-btn" class="btn danger edit-only" title="Reset to defaults">Reset</button>
      <button id="add-project" class="btn edit-only" title="Add new project">＋ Add Project</button>
    </div>
    <div class="hint">Toggle Edit, click on text to edit. Use Save to persist. Reset removes your edits.</div>
  </div>

  <script>
    (function(){
      const STORAGE_KEY = 'portfolioSite_v1';
      const $ = (sel, ctx=document) => ctx.querySelector(sel);
      const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

      const yearEl = $('#year');
      yearEl.textContent = new Date().getFullYear();

      // Simple placeholder image generator (SVG data URI)
      function placeholderImage(w=800, h=450, text='Project'){
        const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${h}">
          <defs><linearGradient id="g" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="#6c8cff"/><stop offset="1" stop-color="#151936"/>
          </linearGradient></defs>
          <rect width="100%" height="100%" fill="url(#g)"/>
          <g fill="#fff" opacity="0.85" font-family="system-ui, -apple-system, Segoe UI, Roboto" text-anchor="middle">
            <text x="50%" y="50%" font-size="${Math.max(16, Math.min(32, Math.floor(w/18)))}" dy="0.35em">${text}</text>
          </g>
        </svg>`;
        const encoded = encodeURIComponent(svg).replace(/'/g, '%27').replace(/"/g, '%22');
        return `data:image/svg+xml;charset=UTF-8,${encoded}`;
      }

      // Initialize default images if empty
      const heroImg = $('#hero-photo');
      if(!heroImg.getAttribute('src')) heroImg.src = placeholderImage(400,400,'Photo');
      $$('#projects-list .project-card').forEach((card, i)=>{
        const img = card.querySelector('[data-prop="image"]');
        if(img && !img.getAttribute('src')) img.src = placeholderImage(800,460,`Project ${i+1}`);
      });

      // State load/save helpers
      function loadState(){
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if(!raw) return null;
          return JSON.parse(raw);
        } catch(e){ console.warn('Failed to load state', e); return null; }
      }
      function saveState(state){
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
          return true;
        } catch(e){
          alert('Saving failed, possibly due to storage limits (large images). Try smaller images or clear data.');
          console.error('Save error', e);
          return false;
        }
      }

      // Apply saved state to DOM
      function applyState(state){
        if(!state) return;
        // Fields
        if(state.fields){
          Object.entries(state.fields).forEach(([key, val])=>{
            const el = document.querySelector(`[data-edit="${CSS.escape(key)}"]`);
            if(el) el.innerHTML = val;
          });
        }
        // Links (hrefs)
        if(state.links){
          Object.entries(state.links).forEach(([id, href])=>{
            const el = document.getElementById(id) || document.querySelector(`[data-edit="${CSS.escape(id)}"][data-edit-href="true"]`);
            if(el && href) el.setAttribute('href', href);
          });
        }
        // Images (singletons like hero)
        if(state.images){
          Object.entries(state.images).forEach(([key, src])=>{
            const img = document.querySelector(`[data-edit-img="${CSS.escape(key)}"]`);
            if(img && src) img.src = src;
          });
        }
        // Projects
        if(Array.isArray(state.projects) && state.projects.length){
          const list = $('#projects-list');
          list.innerHTML = '';
          state.projects.forEach(p=>{
            const card = createProjectCard(p.id || genId(), p.title || 'Untitled', p.desc || '', p.link || '#', p.image || placeholderImage());
            list.appendChild(card);
          });
        }
      }

      // Gather current DOM into state
      function gatherState(){
        const state = { fields:{}, links:{}, images:{}, projects:[] };
        // Fields (text/html)
        $$('[data-edit]').forEach(el=>{
          const key = el.getAttribute('data-edit');
          state.fields[key] = el.innerHTML;
          if(el.matches('[data-edit-href="true"]')){
            // If it has an id, keep that id reference for link
            const id = el.id || key;
            state.links[id] = el.getAttribute('href') || '';
          }
        });
        // Links in contact section with explicit href editors
        $$('[data-href-edit-for]').forEach(btn=>{
          const id = btn.getAttribute('data-href-edit-for');
          const a = document.getElementById(id);
          if(a) state.links[id] = a.getAttribute('href') || '';
        });
        // Images
        $$('[data-edit-img]').forEach(img=>{
          const key = img.getAttribute('data-edit-img');
          state.images[key] = img.getAttribute('src') || '';
        });
        // Projects
        $$('#projects-list .project-card').forEach(card=>{
          const id = card.getAttribute('data-project-id') || genId();
          const title = card.querySelector('[data-prop="title"]')?.textContent?.trim() || '';
          const desc = card.querySelector('[data-prop="desc"]')?.textContent?.trim() || '';
          const link = card.querySelector('[data-prop="link"]')?.getAttribute('href') || '';
          const image = card.querySelector('[data-prop="image"]')?.getAttribute('src') || '';
          state.projects.push({ id, title, desc, link, image });
        });
        return state;
      }

      // ID generator
      function genId(){ return 'p' + Math.random().toString(36).slice(2,8); }

      // Edit mode
      const body = document.body;
      const toggleBtn = $('#toggle-edit');
      const saveBtn = $('#save-btn');
      const resetBtn = $('#reset-btn');
      const addBtn = $('#add-project');

      function setEditMode(on){
        body.classList.toggle('editing', on);
        toggleBtn.setAttribute('aria-pressed', String(on));
        toggleBtn.textContent = on ? '✓ Editing' : '✏︎ Edit';
        // Toggle contenteditable on general fields
        $$('[data-edit]').forEach(el=>{
          // don't set contenteditable for anchors; we still allow text edits though
          const isAnchor = el.tagName.toLowerCase() === 'a';
          el.setAttribute('contenteditable', isAnchor ? 'true' : 'true');
        });
        // Projects in-place editing toggles
        $$('#projects-list .project-card').forEach(card=>{
          const title = card.querySelector('[data-prop="title"]');
          const desc = card.querySelector('[data-prop="desc"]');
          if(title) title.setAttribute('contenteditable', on ? 'true' : 'false');
          if(desc) desc.setAttribute('contenteditable', on ? 'true' : 'false');
        });
      }

      // Wire link editors (contact/social explicit)
      function openHrefEditorForId(id){
        const a = document.getElementById(id);
        if(!a) return;
        const current = a.getAttribute('href') || '';
        const next = prompt('Enter URL (include https:// or mailto:):', current);
        if(next === null) return;
        a.setAttribute('href', next);
      }
      $$('[data-href-edit-for]').forEach(btn=>{
        btn.addEventListener('click', ()=> openHrefEditorForId(btn.getAttribute('data-href-edit-for')));
      });

      // Wire generic [data-edit-href] anchors: add small buttons next to them in projects
      function attachProjectCardBehavior(card){
        const link = card.querySelector('[data-prop="link"]');
        const linkBtn = card.querySelector('.edit-link-btn');
        const removeBtn = card.querySelector('.remove-project');
        const imgInp = card.querySelector('[data-img-input]');
        const imgEl = card.querySelector('[data-prop="image"]');

        if(linkBtn && link){
          linkBtn.addEventListener('click', ()=>{
            const current = link.getAttribute('href') || '';
            const next = prompt('Enter project URL (include https://):', current);
            if(next === null) return;
            link.setAttribute('href', next);
          });
        }
        if(removeBtn){
          removeBtn.addEventListener('click', ()=>{
            if(confirm('Remove this project?')){
              card.remove();
            }
          });
        }
        if(imgInp && imgEl){
          imgInp.addEventListener('change', async (e)=>{
            const file = e.target.files && e.target.files[0];
            if(!file) return;
            if(file.size > 3*1024*1024){
              alert('Image is large. Consider using an image under 3MB to ensure it can be saved.');
            }
            const reader = new FileReader();
            reader.onload = () => { imgEl.src = reader.result; };
            reader.readAsDataURL(file);
          });
        }
      }

      // Attach behavior to initial project cards
      $$('#projects-list .project-card').forEach(attachProjectCardBehavior);

      // Wire hero and other image inputs (singleton)
      $$('[data-img-input]').forEach(inp=>{
        inp.addEventListener('change', (e)=>{
          const key = inp.getAttribute('data-img-input');
          const img = document.querySelector(`[data-edit-img="${CSS.escape(key)}"]`);
          const file = inp.files && inp.files[0];
          if(!img || !file) return;
          if(file.size > 3*1024*1024){
            alert('Image is large. Consider using an image under 3MB to ensure it can be saved.');
          }
          const reader = new FileReader();
          reader.onload = ()=> { img.src = reader.result; };
          reader.readAsDataURL(file);
        });
      });

      // Toggle edit
      toggleBtn.addEventListener('click', ()=>{
        const on = !body.classList.contains('editing');
        setEditMode(on);
      });

      // Save
      saveBtn.addEventListener('click', ()=>{
        const state = gatherState();
        if(saveState(state)){
          saveBtn.textContent = 'Saved ✓';
          setTimeout(()=> saveBtn.textContent = 'Save', 1000);
        }
      });

      // Reset
      resetBtn.addEventListener('click', ()=>{
        if(confirm('This will remove all your edits and restore defaults. Continue?')){
          localStorage.removeItem(STORAGE_KEY);
          location.reload();
        }
      });

      // Add project
      addBtn.addEventListener('click', ()=>{
        const id = genId();
        const title = prompt('Project title:','New Project');
        if(title === null) return;
        const desc = prompt('Short description:','A short description of the project.');
        if(desc === null) return;
        const link = prompt('Project URL (optional):','https://');
        const card = createProjectCard(id, title || 'Untitled', desc || '', link || '#', placeholderImage(800,460,title||'Project'));
        $('#projects-list').prepend(card);
        if(body.classList.contains('editing')) setEditMode(true); // refresh editable states on new card
      });

      // Create a project card element
      function createProjectCard(id, title, desc, link, imageSrc){
        const tpl = document.createElement('template');
        tpl.innerHTML = `
          <article class="project-card" data-project-id="${id}">
            <div class="image-wrap">
              <img alt="Project image" data-prop="image" data-edit-img="project-${id}" src="${imageSrc || ''}" />
              <label class="img-change edit-only">Change Image
                <input type="file" accept="image/*" data-img-input="project-${id}" hidden />
              </label>
            </div>
            <div class="project-content">
              <h3 data-prop="title" contenteditable="false"></h3>
              <p class="muted" data-prop="desc" contenteditable="false"></p>
              <p class="project-links">
                <a href="#" data-prop="link" data-edit-href="true">View Project</a>
                <button class="edit-link-btn edit-only" title="Edit project link URL">✏︎ link</button>
              </p>
              <button class="remove-project edit-only" title="Remove this project">Remove</button>
            </div>
          </article>
        `.trim();
        const card = tpl.content.firstElementChild;
        card.querySelector('[data-prop="title"]').textContent = title || 'Untitled';
        card.querySelector('[data-prop="desc"]').textContent = desc || '';
        card.querySelector('[data-prop="link"]').setAttribute('href', link || '#');
        attachProjectCardBehavior(card);
        return card;
      }

      // Load any saved data on first run
      applyState(loadState());

      // If user enters edit mode by default via URL hash ?edit=1
      if(location.search.includes('edit=1')) setEditMode(true);

      // Accessibility: prevent navigation when editing text on anchors
      document.addEventListener('click', (e)=>{
        if(!body.classList.contains('editing')) return;
        const a = e.target.closest('a');
        if(a && a.isContentEditable){
          e.preventDefault();
        }
      });

      // Keep nav active based on hash
      function updateActiveNav(){
        const y = window.scrollY + 100;
        const sections = ['about','projects','contact'];
        let current = null;
        sections.forEach(id=>{
          const sec = document.getElementById(id);
          if(!sec) return;
          const top = sec.getBoundingClientRect().top + window.scrollY;
          if(y >= top) current = id;
        });
        $$('nav a').forEach(a=> a.classList.toggle('active', ('#'+current) === a.getAttribute('href')));
      }
      document.addEventListener('scroll', updateActiveNav, {passive:true});
      updateActiveNav();
    })();
  </script>
</body>
</html>